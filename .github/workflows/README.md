# ç®€åŒ–CI/CDå·¥ä½œæµè¯´æ˜

æœ¬é¡¹ç›®ä½¿ç”¨ç®€åŒ–çš„GitHub Actionså·¥ä½œæµï¼Œä¸“æ³¨äºåŸºç¡€æµ‹è¯•å’Œéƒ¨ç½²åŠŸèƒ½ã€‚

## ğŸ“‹ å·¥ä½œæµæ¦‚è§ˆ

### `simple-cicd.yml` - ç®€åŒ–CI/CDæµç¨‹
- **è§¦å‘æ¡ä»¶**: æ¨é€åˆ°main/developåˆ†æ”¯ï¼ŒPRåˆ°main/developåˆ†æ”¯
- **åŠŸèƒ½**: 
  - è¿è¡Œæ‰€æœ‰æœåŠ¡æµ‹è¯•ï¼ˆç”¨æˆ·ã€æ´»åŠ¨ã€é€šçŸ¥ã€å‰ç«¯ï¼‰
  - è‡ªåŠ¨éƒ¨ç½²åˆ°Kubernetesé›†ç¾¤
  - å¥åº·æ£€æŸ¥å’ŒçŠ¶æ€éªŒè¯

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨è§¦å‘
- æ¨é€åˆ° `main` æˆ– `develop` åˆ†æ”¯æ—¶è‡ªåŠ¨è¿è¡Œ
- åˆ›å»ºPull Requestæ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•

### æ‰‹åŠ¨è§¦å‘
```bash
# æŸ¥çœ‹å·¥ä½œæµçŠ¶æ€
gh run list

# æŸ¥çœ‹ç‰¹å®šå·¥ä½œæµçŠ¶æ€
gh run list --workflow=simple-cicd.yml

# æŸ¥çœ‹å·¥ä½œæµæ—¥å¿—
gh run view <run-id>
```

## ğŸ”§ é…ç½®è¦æ±‚

### å¿…éœ€çš„Secrets

åœ¨GitHubä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹secretsï¼š

- `KUBE_CONFIG`: Base64ç¼–ç çš„kubeconfigæ–‡ä»¶

## ğŸ“Š å·¥ä½œæµç¨‹

1. **æµ‹è¯•é˜¶æ®µ**:
   - ç”¨æˆ·æœåŠ¡æµ‹è¯•
   - æ´»åŠ¨æœåŠ¡æµ‹è¯•  
   - é€šçŸ¥æœåŠ¡æµ‹è¯•
   - å‰ç«¯æµ‹è¯•

2. **éƒ¨ç½²é˜¶æ®µ** (ä»…mainåˆ†æ”¯):
   - éƒ¨ç½²åˆ°Kubernetesé›†ç¾¤
   - å¥åº·æ£€æŸ¥
   - çŠ¶æ€éªŒè¯

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æµ‹è¯•å¤±è´¥**:
   - æ£€æŸ¥æ•°æ®åº“è¿æ¥
   - éªŒè¯ç¯å¢ƒå˜é‡
   - æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

2. **éƒ¨ç½²å¤±è´¥**:
   - æ£€æŸ¥Kubernetesé…ç½®
   - æŸ¥çœ‹PodçŠ¶æ€
   - éªŒè¯æœåŠ¡è¿é€šæ€§

### è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹PodçŠ¶æ€
kubectl get pods -n mywork

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
kubectl logs -n mywork -l app=user-service

# æ£€æŸ¥èµ„æºä½¿ç”¨
kubectl top pods -n mywork

# æŸ¥çœ‹IngressçŠ¶æ€
kubectl get ingress -n mywork
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GitHub Actionsæ–‡æ¡£](https://docs.github.com/en/actions)
- [Kubernetesæ–‡æ¡£](https://kubernetes.io/docs/)
- [é¡¹ç›®éƒ¨ç½²è„šæœ¬](k8s/deploy.sh)
